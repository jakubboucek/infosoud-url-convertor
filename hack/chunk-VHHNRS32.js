import{a as Y,b as U,c as $,d as ee,e as ie,f as ne,g as ae,h as te,i as re,j as oe,k as le,l as me}from"./chunk-3KPTIKMA.js";import{b as V}from"./chunk-B5GSPWBG.js";import{a as Q,b as se}from"./chunk-YLXLMOMV.js";import{a as de}from"./chunk-Q6NTRDRM.js";import{a as Z,b as X}from"./chunk-TCVD7364.js";import{c as W,d as F,f as H,j as G,w as x,y as I}from"./chunk-GI74UHXH.js";import"./chunk-4PAPZGIZ.js";import{$ as t,C as O,Da as d,E as a,Ea as c,G as v,H as b,V as j,W as L,_ as l,aa as o,ba as p,cb as R,eb as K,ga as T,ha as w,ia as z,kb as N,oa as B,qa as u,ra as _,rb as q,sa as k,sb as E,t as g,u as f,ua as S,va as y,wa as C,xb as A}from"./chunk-XOZ5UXZ7.js";import"./chunk-EJXKHW6O.js";import{a as P,d as D}from"./chunk-DGAILPFQ.js";var J=class h{static \u0275fac=function(r){return new(r||h)};static \u0275cmp=b({type:h,selectors:[["app-informace-o-jednani-popis-stranky"]],decls:30,vars:27,consts:[[3,"innerHTML"],["size","m"],["size","s"],["size","l"],["size","xl"]],template:function(r,e){r&1&&(p(0,"p",0),d(1,"i18next"),p(2,"gov-spacer",1)(3,"p",0),d(4,"i18next"),p(5,"gov-spacer",2)(6,"p",0),d(7,"i18next"),p(8,"gov-spacer",2),t(9,"p"),u(10),d(11,"i18next"),p(12,"app-fragment-tlacitko-filtru"),u(13),d(14,"i18next"),o(),p(15,"gov-spacer",3)(16,"p",0),d(17,"i18next"),p(18,"gov-spacer",2),t(19,"p"),u(20),d(21,"i18next"),p(22,"app-fragment-tlacitko-filtru"),u(23),d(24,"i18next"),o(),p(25,"gov-spacer",4),t(26,"p")(27,"strong"),u(28),d(29,"i18next"),o()()),r&2&&(l("innerHTML",c(1,9,"jednani:labels.informace1"),O),a(3),l("innerHTML",c(4,11,"jednani:labels.informace2"),O),a(3),l("innerHTML",c(7,13,"jednani:labels.informace3"),O),a(4),k("",c(11,15,"jednani:labels.informace4a")," "),a(3),k(" ",c(14,17,"jednani:labels.informace4b")),a(3),l("innerHTML",c(17,19,"jednani:labels.informace5"),O),a(4),k("",c(21,21,"jednani:labels.informace6a")," "),a(3),k(" ",c(24,23,"jednani:labels.informace6b")),a(5),_(c(29,25,"jednani:labels.informace7")))},dependencies:[I,x,te,E],encapsulation:2})};function ue(h,n){if(h&1&&p(0,"hedgehog-gov-message",30)(1,"gov-spacer",8),h&2){let r=z();l("message",r.formErrorMessage)("color","error")}}function he(h,n){if(h&1){let r=T();t(0,"div",12)(1,"label",31),u(2),d(3,"i18next"),o(),t(4,"hedgehog-gov-select",14),C("valueChange",function(s){g(r);let m=z();return y(m.formData.agenda,s)||(m.formData.agenda=s),f(s)}),o()()}if(h&2){let r=z();a(2),_(c(3,6,"common:labels.agenda")),a(2),l("id","agenda")("titleKey","nazev")("valueKey","kod")("listData",r.agendy),S("value",r.formData.agenda)}}var M=1,ce=class h{constructor(n,r,e,s,m,i,ve,_e,Se){this.i18nextService=n;this.organizaceApi=r;this.spisovaZnackaApi=e;this.errorParser=s;this.router=m;this.cache=i;this.formValidation=ve;this.detailJednaniResolver=_e;this.enumDataBuilder=Se}formErrorMessage="";loadingMessage="";isLoading=!1;formData=new V;organizace=[];okresniSoudy=[];agendy=[];znackaDruhyVeci=[];znackaDruhyVeciKod=[];jednaciSine=[];initialLoaded=!1;ngOnInit(){this.handleRouteEvents(),this.isLoading=!0,Promise.all([this.organizaceApi.getOrganizeceLov(),this.spisovaZnackaApi.getDruhSpisoveZnackyLovKod("jednani"),this.enumDataBuilder.getAgendyLov()]).then(n=>D(this,null,function*(){this.initialLoaded=!0,this.organizace=[{nazev:this.i18nextService.t("common:options.druhOrganizaceDefault"),kod:null}],this.organizace.push(...n[0]),this.znackaDruhyVeci=n[1],this.agendy=n[2],this.znackaDruhyVeciKod=this.znackaDruhyVeci.map(r=>r.kod),this.cache.exists(M)&&(yield this.loadData(this.cache.get(M,V))),this.okresniSoudy.length==0&&(yield this.onDruhOrganizaceSelect(null))})).catch(()=>{this.formErrorMessage=this.i18nextService.t("common:messages.DATA_LOADING_ERROR_0000")}).finally(()=>{this.isLoading=!1})}handleRouteEvents(){this.detailJednaniResolver.errorMessage.subscribe(n=>{this.handleResolverMessage(n)}),this.router.events.subscribe(n=>{n instanceof R&&(this.formErrorMessage=""),n instanceof K&&n.error&&this.handleResolverMessage(n?.error)})}handleResolverMessage(n){return D(this,null,function*(){n&&(this.formErrorMessage=this.errorParser.getParsedMessageString("jednani:messages",n))})}loadData(n){return D(this,null,function*(){yield this.onDruhOrganizaceSelect(n?.druhOrganizace),yield this.onOkresniOrganizaceSelect(n?.okresniSoud),this.formData=n})}onDruhOrganizaceSelect(n){return D(this,null,function*(){this.isLoading=!0,this.formData.okresniSoud=null,this.formData.jednaciSin=null,Promise.all([this.organizaceApi.getPodrizeneOrganizaceOrganizaceLov(n),this.organizaceApi.getJednaciSineOrganizaceLovKod(n)]).then(r=>D(this,null,function*(){this.okresniSoudy=[{nazev:"",kod:null},...r[0]],r[1].length>0?(this.jednaciSine=[{kod:null}],this.jednaciSine.push(...r[1])):this.jednaciSine=[]})).catch(()=>{this.formErrorMessage=this.i18nextService.t("common:messages.DATA_LOADING_ERROR_0000")}).finally(()=>{this.isLoading=!1})})}onOkresniOrganizaceSelect(n){return D(this,null,function*(){this.initialLoaded&&(this.isLoading=!0,this.formData.jednaciSin=null,!n&&this.formData.druhOrganizace&&(n=this.formData.druhOrganizace),yield this.organizaceApi.getJednaciSineOrganizaceLovKod(n).then(r=>{r.length>0?(this.jednaciSine=[{kod:null}],this.jednaciSine.push(...r)):this.jednaciSine=[]}).catch(()=>{this.formErrorMessage=this.i18nextService.t("common:messages.DATA_LOADING_ERROR_0000")}).finally(()=>{this.isLoading=!1}))})}onSpznSubmit(){this.cacheFormData(),this.formValidation.validateJednaniSPZN(this.formData,this.znackaDruhyVeciKod).then(()=>{this.formData.typHledani="SPZN",this.router.navigate([A.detailJednani.fullPath],{queryParams:this.formData})}).catch(n=>this.formErrorMessage=this.i18nextService.t(`jednani:messages.${n.message}`))}onJednaniSubmit(){this.cacheFormData(),this.formValidation.validateTypJednani(this.formData).then(()=>{this.formData.typHledani="JEDNANI",this.router.navigate([A.detailJednani.fullPath],{queryParams:this.formData})}).catch(n=>this.formErrorMessage=this.i18nextService.t(`jednani:messages.${n.message}`))}robotErrorMessage(n){n.key=="Enter"&&(this.formErrorMessage=this.i18nextService.t("common:messages.ROBOT_0000"))}cacheFormData(){this.cache.set(M,P({},this.formData),!0)}clearForm(){return D(this,null,function*(){this.formData=new V,yield this.onDruhOrganizaceSelect(null),this.cache.set(M,P({},this.formData),!0)})}static \u0275fac=function(r){return new(r||h)(v(q),v(re),v(oe),v(se),v(N),v(Y),v(le),v(de),v(me))};static \u0275cmp=b({type:h,selectors:[["app-informace-o-jednani"]],decls:63,vars:67,consts:[["formularZnacka","ngForm"],["znackaSenat",""],["znackaDruh",""],["znackaCislo",""],["znackaRok",""],["formularJednani","ngForm"],[3,"isLoading","title"],["size","s"],["size","l"],[1,"forms-wrap"],["autocomplete","off",3,"keypress"],[1,"form-wrap"],[1,"form-control"],["for","druhOrganizace",1,"label"],[1,"w-100",3,"valueChange","id","titleKey","valueKey","listData","value"],["for","okresniSoud",1,"label"],[1,"w-100",3,"valueChange","id","titleKey","valueKey","disabled","listData","value"],[1,"form-znacka-wrap"],[1,"form-znacka"],[3,"valueChange","id","showError","value","maxLength"],[3,"valueChange","id","showError","value"],[1,"znacka-lomitko"],[3,"buttonClick","buttonId","color","size","disabled","iconStart","iconSetStart"],[3,"keypress"],["for","jednaciSin",1,"label"],[1,"w-100",3,"valueChange","id","titleKey","valueKey","listData","disabled","value"],["for","datumJednani",1,"label"],[1,"w-100",3,"valueChange","id","value"],[3,"btnSubmit","btnClear","canSubmit"],["size","xl"],[3,"message","color"],["for","agenda",1,"label"]],template:function(r,e){if(r&1){let s=T();p(0,"hedgehog-gov-loading",6),d(1,"i18next"),t(2,"h1"),u(3),d(4,"i18next"),o(),p(5,"gov-spacer",7),t(6,"strong"),u(7),d(8,"i18next"),o(),p(9,"gov-spacer",8)(10,"app-fragment-dulezite-informace")(11,"gov-spacer",8),j(12,ue,2,2),t(13,"div",9)(14,"form",10,0),w("keypress",function(i){return g(s),f(e.robotErrorMessage(i))}),t(16,"div",11)(17,"div",12)(18,"label",13),u(19),d(20,"i18next"),o(),t(21,"hedgehog-gov-select",14),C("valueChange",function(i){return g(s),y(e.formData.druhOrganizace,i)||(e.formData.druhOrganizace=i),f(i)}),w("valueChange",function(i){return g(s),f(e.onDruhOrganizaceSelect(i))}),o()(),t(22,"div",12)(23,"label",15),u(24),d(25,"i18next"),o(),t(26,"hedgehog-gov-select",16),C("valueChange",function(i){return g(s),y(e.formData.okresniSoud,i)||(e.formData.okresniSoud=i),f(i)}),w("valueChange",function(i){return g(s),f(e.onOkresniOrganizaceSelect(i))}),o()(),p(27,"hr"),t(28,"div",12)(29,"label",15),u(30),d(31,"i18next"),o(),t(32,"div",17)(33,"div",18)(34,"hedgehog-gov-number-input",19,1),C("valueChange",function(i){return g(s),y(e.formData.cisloSenatu,i)||(e.formData.cisloSenatu=i),f(i)}),o(),t(36,"hedgehog-gov-input",19,2),C("valueChange",function(i){return g(s),y(e.formData.druhVeci,i)||(e.formData.druhVeci=i),f(i)}),o(),t(38,"hedgehog-gov-number-input",20,3),C("valueChange",function(i){return g(s),y(e.formData.bcVec,i)||(e.formData.bcVec=i),f(i)}),o(),t(40,"span",21),u(41,"/"),o(),t(42,"hedgehog-gov-number-input",20,4),C("valueChange",function(i){return g(s),y(e.formData.rocnik,i)||(e.formData.rocnik=i),f(i)}),o()()()(),j(44,he,5,8,"div",12),o(),t(45,"hedgehog-gov-button",22),w("buttonClick",function(){return g(s),f(e.onSpznSubmit())}),o()(),p(46,"hr"),t(47,"form",23,5),w("keypress",function(i){return g(s),f(e.robotErrorMessage(i))}),t(49,"div",11)(50,"div",12)(51,"label",24),u(52),d(53,"i18next"),o(),t(54,"hedgehog-gov-select",25),C("valueChange",function(i){return g(s),y(e.formData.jednaciSin,i)||(e.formData.jednaciSin=i),f(i)}),o()(),t(55,"div",12)(56,"label",26),u(57),d(58,"i18next"),o(),t(59,"hedgehog-gov-datepicker",27),C("valueChange",function(i){return g(s),y(e.formData.datumJednani,i)||(e.formData.datumJednani=i),f(i)}),o()()(),t(60,"app-fragment-tlacitka-formularu",28),w("btnSubmit",function(){return g(s),f(e.onJednaniSubmit())})("btnClear",function(){return g(s),f(e.clearForm())}),o()()(),p(61,"gov-spacer",29)(62,"app-informace-o-jednani-popis-stranky")}if(r&2){let s=B(15),m=B(48);l("isLoading",e.isLoading)("title",c(1,51,"common:messages.DATA_LOADING_0002")),a(3),_(c(4,53,"jednani:titles.informaceOJednani")),a(4),k(" ",c(8,55,"jednani:pageSubtitle")," "),a(5),L(e.formErrorMessage?12:-1),a(7),_(c(20,57,"common:labels.krajskyVrchni")),a(2),l("id","druhOrganizace")("titleKey","nazev")("valueKey","kod")("listData",e.organizace),S("value",e.formData.druhOrganizace),a(3),_(c(25,59,"common:labels.okresniSoud")),a(2),l("id","okresniSoud")("titleKey","nazev")("valueKey","kod")("disabled",e.okresniSoudy.length==0)("listData",e.okresniSoudy),S("value",e.formData.okresniSoud),a(4),_(c(31,61,"common:labels.spisovaZnacka")),a(4),l("id","znackaSenat")("showError",!1),S("value",e.formData.cisloSenatu),l("maxLength",9),a(2),l("id","znackaDruh")("showError",!1),S("value",e.formData.druhVeci),l("maxLength",9),a(2),l("id","znackaCislo")("showError",!1),S("value",e.formData.bcVec),a(4),l("id","znackaRok")("showError",!1),S("value",e.formData.rocnik),a(2),L((e.formData.druhVeci=="NC"||e.formData.druhVeci=="nc")&&(e.formData!=null&&e.formData.druhOrganizace)&&!(e.formData!=null&&e.formData.okresniSoud)?44:-1),a(),l("buttonId","formSubmitButton")("color","success")("size","m")("disabled",s.invalid)("iconStart","chevron-right")("iconSetStart","components"),a(7),_(c(53,63,"common:labels.jednaciSin")),a(2),l("id","jednaciSin")("titleKey","kod")("valueKey","kod")("listData",e.jednaciSine)("disabled",e.jednaciSine.length==0),S("value",e.formData.jednaciSin),a(3),_(c(58,65,"common:labels.datumJednani")),a(2),l("id","datumJednani"),S("value",e.formData.datumJednani),a(),l("canSubmit",m.valid)}},dependencies:[Z,I,x,X,Q,G,H,W,F,ie,ee,U,ne,$,ae,J,E],styles:[".w-100[_ngcontent-%COMP%]{width:100%}.w-50[_ngcontent-%COMP%]{width:50%}.hidden[_ngcontent-%COMP%]{visibility:hidden}form[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-direction:column}@media screen and (min-width: 960px){form[_ngcontent-%COMP%]{align-items:end;flex-direction:row}}.forms-wrap[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.form-wrap[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;flex:1 1 100%;max-width:100%}@media screen and (min-width: 960px){.form-wrap[_ngcontent-%COMP%]{min-width:500px;flex:1 1 50%;max-width:50%}}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media screen and (max-width: 959px){.form-group[_ngcontent-%COMP%]{gap:1rem}}@media screen and (min-width: 960px){.form-group[_ngcontent-%COMP%]{flex-direction:row}}.form-znacka-wrap[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.znacka-lomitko[_ngcontent-%COMP%]{display:flex;place-items:center;font-size:x-large}.form-control[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-direction:column}@media screen and (min-width: 600px){.form-control[_ngcontent-%COMP%]{flex:1 1 100%;max-width:100%;gap:1rem;flex-direction:row}}.form-znacka[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}@media screen and (min-width: 400px){.form-znacka[_ngcontent-%COMP%]{flex-direction:row}}.label[_ngcontent-%COMP%]{place-content:center}@media screen and (min-width: 600px){.label[_ngcontent-%COMP%]{flex:1 1 160px;max-width:160px;min-width:160px}}"]})};export{ce as InformaceOJednaniComponent};
