import{m as T,t as F,y as $}from"./chunk-GI74UHXH.js";import{$ as u,E as s,G as h,H as L,I as k,M as d,N as w,Ra as D,Sa as H,V as A,W as S,Wa as K,_ as c,a as m,aa as l,ba as v,db as q,ga as N,ha as R,hb as j,ia as b,kb as G,lb as E,n as _,o as I,pb as O,qa as y,ra as C,rb as U,t as P,u as M,ya as B}from"./chunk-XOZ5UXZ7.js";function Q(i,o){i&1&&v(0,"gov-icon",3)}function X(i,o){if(i&1){let e=N();u(0,"a",7),R("click",function(){P(e);let r=b().first,n=b();return M(n.onBreadcrumbAction(r))}),y(1),l()}if(i&2){let e=b(),t=e.$implicit,r=e.index;c("id",B("hedgehog-breabcrumb-link-",r))("routerLink",t.url)("queryParams",t.queryParams),s(),C(t.label)}}function Y(i,o){if(i&1&&(u(0,"label",8),y(1),l()),i&2){let e=b(),t=e.$implicit,r=e.index;c("for",B("hedgehog-breabcrumb-link-",r)),s(),C(t.label)}}function z(i,o){i&1&&v(0,"gov-icon",9)}function Z(i,o){if(i&1&&(u(0,"li"),A(1,Q,1,0,"gov-icon",3),d(2,X,2,5,"a",4),u(3,"strong"),d(4,Y,2,3,"label",5),l(),d(5,z,1,0,"gov-icon",6),l()),i&2){let e=o.$implicit,t=o.last,r=o.first,n=b();s(),S(n.showHomeIcon&&r?1:-1),s(),c("ngIf",(e.url===""||e.url)&&!t),s(2),c("ngIf",e.url!==""&&!e.url||t),s(),c("ngIf",!t)}}var a={isMenuAction:!1,isBreadcrumbAction:!1,currentPageCriterion:null},V=new m,W=new m,J=new m,ve=(()=>{class i{setLabel(e){V.next(e)}setParams(e){W.next(e)}setCriteria(e){J.next(e)}getCriteria(){return a.currentPageCriterion}resetBreadcrumbItems(){a.isMenuAction=!0}isBreadcrumbAction(){return a.isBreadcrumbAction}setBreadcrumbDefaultPoint(e){a.defaultPoint=e}setBreadcrumbKey(e){a.breacrumbKey=e}static \u0275fac=function(t){return new(t||i)};static \u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var x=class{label=null;languageLabels=null;key=null;url=null;queryParams=null;criteria},ye=(()=>{class i{router;activatedRoute;i18next;breadcrumbLabelKey="breadcrumb";breadcrumbKey="breadcrumbs";maxBreadcrumbsCount=5;labelMaxLength=50;showHomeIcon=!0;breadcrumbs=[];shortBreadcrumbs=[];isMenuAction=!1;isBreadcrumbAction=!1;pageRoute=null;breadcrumbLabelChanged=new w;constructor(e,t,r){this.router=e,this.activatedRoute=t,this.i18next=r}ngOnInit(){this.router.events.subscribe(e=>{e instanceof q&&this.processBreadcrumbLabels()}),a.breacrumbKey&&(this.breadcrumbKey=a.breacrumbKey),this.setDefaultPoint(),this.checkLabelChanges(),this.checkQueryParamsChanges(),this.checkCriteriaChanges()}processBreadcrumbLabels(){this.pageRoute=this.activatedRoute.root;let e=this.createUrl(),t=this.createUrlKey(e,this.pageRoute.snapshot.queryParams);this.checkMainMenuAction(),this.getBreadcrumbFromStorage(),this.refreshBreadcrumbs(this.pageRoute,e,t),this.setBreadcrumbLabel(),this.setCurrentPageCriterion(),window.sessionStorage.setItem(this.breadcrumbKey,JSON.stringify(this.breadcrumbs)),this.breadcrumbs.length>this.maxBreadcrumbsCount&&this.createShortBreadcrumbsList(),this.checkBreadcrumbMenuAction()}checkLabelChanges(){V.subscribe(e=>{this.breadcrumbs.length>0&&(this.breadcrumbs[this.breadcrumbs.length-1].languageLabels=e,this.setBreadcrumbLabel())})}checkQueryParamsChanges(){W.subscribe(e=>{this.breadcrumbs.length>0&&(this.breadcrumbs[this.breadcrumbs.length-1].queryParams=e,this.breadcrumbs[this.breadcrumbs.length-1].key=this.createUrlKey(this.breadcrumbs[this.breadcrumbs.length-1].url,this.breadcrumbs[this.breadcrumbs.length-1].queryParams))})}checkCriteriaChanges(){J.subscribe(e=>{this.breadcrumbs.length>0&&(this.breadcrumbs[this.breadcrumbs.length-1].criteria=e)})}refreshBreadcrumbs(e,t,r){let n=e.snapshot.data[this.breadcrumbLabelKey],g;if(this.breadcrumbs.length>0){let p=this.getBreadcrumbPositionByURL(t);p!==-1&&(g=this.breadcrumbs[p]?.criteria||null,this.breadcrumbs.length-=this.breadcrumbs.length-p)}let f={label:"",languageLabels:n,key:r,url:t,queryParams:e.snapshot.queryParams};g!==null&&(f.criteria=g),f.key!=""&&this.breadcrumbs.push(f)}getBreadcrumbPositionByURL(e){let t=-1;for(let r=this.breadcrumbs.length-1;r>=0;r--)if(this.breadcrumbs[r].url===e){t=r;break}return t}createShortBreadcrumbsList(){this.shortBreadcrumbs=[];let e=new x;e.label="...",e.key="...",this.shortBreadcrumbs.push(this.breadcrumbs[0]),this.shortBreadcrumbs.push(e);let t=this.breadcrumbs.length-this.maxBreadcrumbsCount+1;for(let r=t;r<this.breadcrumbs.length;r++)this.shortBreadcrumbs.push(this.breadcrumbs[r])}createUrlKey(e,t){let r=`${e}?`;for(let n in t)t.hasOwnProperty(n)&&n!=="refresh"&&(r=`${r}${n}=${t[n]}&`);return(r.endsWith("&")||r.endsWith("?"))&&(r=r.substring(0,r.length-1)),r}createUrl(){let e="";if(!this.pageRoute)return e;for(;this.pageRoute.firstChild;)e.endsWith("/")||(e+="/"),this.pageRoute=this.pageRoute.firstChild,e+=this.pageRoute.snapshot.url.map(t=>t.path).join("/");return e.endsWith("/")&&(e=e.substring(0,e.length-1)),e}onBreadcrumbAction(e=!1){a.defaultPoint&&e&&this.setDefaultPoint(),this.isBreadcrumbAction=!0,a.isBreadcrumbAction=!0}checkMainMenuAction(){a.isMenuAction?(a.isMenuAction=!1,this.setDefaultPoint(),this.isMenuAction=!0):this.isMenuAction=!1}setDefaultPoint(){let e=a.defaultPoint;e?this.breadcrumbs=[{label:e.language[this.i18next.language],languageLabels:e?.language,key:e?.path,url:e?.path,queryParams:e?.params}]:this.breadcrumbs=[]}getBreadcrumbFromStorage(){this.breadcrumbs.length<1&&window.sessionStorage.getItem(this.breadcrumbKey)!==null&&!this.isMenuAction&&(this.breadcrumbs=JSON.parse(window.sessionStorage.getItem(this.breadcrumbKey)))}setBreadcrumbLabel(){let e=this.i18next.language;this.breadcrumbs.forEach(t=>{if(t.languageLabels){let r=t.languageLabels[e];r?(t.label=r.length>this.labelMaxLength?`${r.substring(0,this.labelMaxLength)}...`:r,t.label&&this.breadcrumbLabelChanged.emit(t.label)):t.label=`No data for key ${e}.`}})}setCurrentPageCriterion(){this.breadcrumbs.length>0&&(a.currentPageCriterion=this.breadcrumbs[this.breadcrumbs.length-1].criteria||null)}checkBreadcrumbMenuAction(){this.isBreadcrumbAction?this.isBreadcrumbAction=!1:a.isBreadcrumbAction=!1}static \u0275fac=function(t){return new(t||i)(h(G),h(j),h(U))};static \u0275cmp=L({type:i,selectors:[["hedgehog-gov-breadcrumb-navigation"]],inputs:{maxBreadcrumbsCount:"maxBreadcrumbsCount",labelMaxLength:"labelMaxLength",showHomeIcon:"showHomeIcon"},outputs:{breadcrumbLabelChanged:"breadcrumbLabelChanged"},standalone:!1,decls:3,vars:1,consts:[["accessible-label","You are in the following level",1,"gov-breadcrumb"],[1,"breadcrumbItems"],[4,"ngFor","ngForOf"],["type","components","name","house-door-fill"],[3,"id","routerLink","queryParams","click",4,"ngIf"],[3,"for",4,"ngIf"],["type","components","name","chevron-right",4,"ngIf"],[3,"click","id","routerLink","queryParams"],[3,"for"],["type","components","name","chevron-right"]],template:function(t,r){t&1&&(u(0,"gov-breadcrumbs",0)(1,"ul",1),d(2,Z,6,4,"li",2),l()()),t&2&&(s(2),c("ngForOf",r.breadcrumbs.length>r.maxBreadcrumbsCount?r.shortBreadcrumbs:r.breadcrumbs))},dependencies:[E,D,H,T,F],styles:["gov-icon[_ngcontent-%COMP%]{margin-left:5px!important}.breadcrumbItems[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}"]})}return i})(),Ce=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=k({type:i});static \u0275inj=I({imports:[O,K,$]})}return i})();export{ve as a,ye as b,Ce as c};
